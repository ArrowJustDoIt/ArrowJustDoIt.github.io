<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
  <channel>
    <title>fantaster | 杨柳青</title>
    <link>http://杨柳青一些事.中国</link>
    <description>My personal blog</description>
    
      <item>
        <title>佛山</title>
        <link>http://杨柳青一些事.中国/2015/10/01/foushan.html</link>
        <guid isPermaLink="true">http://杨柳青一些事.中国/2015/10/01/foushan.html</guid>
        <pubDate>Thu, 01 Oct 2015 00:00:00 +0800</pubDate>
        <description>&lt;p&gt;趁着假期,和几个小伙伴去同学家玩耍,应该会挺有趣&lt;/p&gt;
</description>
      </item>
    
      <item>
        <title>URI、URL和URN三者之间的区别</title>
        <link>http://杨柳青一些事.中国/2015/03/12/URI-URL-URN.html</link>
        <guid isPermaLink="true">http://杨柳青一些事.中国/2015/03/12/URI-URL-URN.html</guid>
        <pubDate>Thu, 12 Mar 2015 00:00:00 +0800</pubDate>
        <description>&lt;p&gt;这是一个经典的技术争论，许多人都会自问：URL、URI，很可能还有URN，它们之间的区别是什么。虽然，现在我们简单地把 URN 和 URL 都看做 URI，但严格来说URI可以进一步划分为URL、URN或者这两者的组合，所以了解这三者之间的区别将会非常有趣并让人受益匪浅。如果你恰好在某个地方碰到了这些东西，那么至少应该知道它们的含义。&lt;/p&gt;

&lt;hr&gt;

&lt;h3&gt;&lt;strong&gt;definition&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;这三个缩略词是Tim Berners-Lee在一篇名为RFC 3986: Uniform Resource Identifier (URI): Generic Syntax的文档中定义的互联网标准追踪协议。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;URI&lt;/strong&gt;，是&lt;code&gt;uniform resource identifier&lt;/code&gt;，统一资源标识符，用来唯一的标识一个资源。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;URL&lt;/strong&gt;,是&lt;code&gt;uniform resource locator&lt;/code&gt;，统一资源定位器，它是一种具体的URI，即URL可以用来标识一个资源，而且还指明了如何locate这个资源。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;URN&lt;/strong&gt;,是&lt;code&gt;uniform resource name&lt;/code&gt;，统一资源命名，是通过名字来标识资源。&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;区别&lt;/h2&gt;

&lt;p&gt;首先我们要弄清楚一件事：URL和URN都是URI的子集。&lt;/p&gt;

&lt;p&gt;换言之，URL和URN都是URI，但是URI不一定是URL或者URN。为了更好的理解这个概念，看下面这张图片。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/technology/URI-URL-URN.png&quot; alt=&quot;1&quot;&gt;&lt;/p&gt;

&lt;p&gt;通过下面的例子（源自 Wikipedia），我们可以很好地理解URN 和 URL之间的区别。如果是一个人，我们会想到他的姓名和住址。&lt;/p&gt;

&lt;p&gt;URL类似于住址，它告诉你一种寻找目标的方式（在这个例子中，是通过街道地址找到一个人）。要知道，上述定义同时也是一个URI。&lt;/p&gt;

&lt;p&gt;相对地，我们可以把一个人的名字看作是URN；因此可以用URN来唯一标识一个实体。由于可能存在同名（姓氏也相同）的情况，所以更准确地说，人名这个例子并不是十分恰当。更为恰当的是书籍的ISBN码和产品在系统内的序列号，尽管没有告诉你用什么方式或者到什么地方去找到目标，但是你有足够的信息来检索到它。&lt;/p&gt;

&lt;h2&gt;一个用于理解这三者的例子&lt;/h2&gt;

&lt;p&gt;我们来看一下上述概念如何应用于与我们息息相关的互联网。&lt;/p&gt;

&lt;p&gt;再次引用Wikipedia ，这些引文给出的解释，比上面人员地址的例子更为专业：&lt;/p&gt;

&lt;p&gt;关于URL：&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;URL是URI的一种，不仅标识了Web 资源，还指定了操作或者获取方式，同时指出了主要访问机制和网络位置。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;关于URN：&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;URN是URI的一种，用特定命名空间的名字标识资源。使用URN可以在不知道其网络位置及访问方式的情况下讨论资源。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;现在，如果到Web上去看一下，你会找出很多例子，这比其他东西更容易让人困惑。我只展示一个例子，非常简单清楚地告诉你在互联网中URI 、URL和URN之间的不同。&lt;/p&gt;

&lt;p&gt;我们一起来看下面这个虚构的例子。这是一个URI：&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;http://test.com/posts/hello.html#intro
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;我们开始分析&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;http://
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;是&lt;code&gt;定义如何访问资源的方式&lt;/code&gt;。另外&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;test.com/posts/hello.html
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;是&lt;code&gt;资源存放的位置&lt;/code&gt;，那么，在这个例子中，&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;#intro
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;是&lt;code&gt;资源&lt;/code&gt;。&lt;/p&gt;

&lt;p&gt;URL是URI的一个子集，告诉我们&lt;code&gt;访问网络位置的方式&lt;/code&gt;。在我们的例子中，URL应该如下所示：&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;http://test.com/posts/hello.html
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;URN是URI的子集，包括&lt;code&gt;名字&lt;/code&gt;（给定的命名空间内），但是&lt;code&gt;不包括访问方式&lt;/code&gt;，如下所示：&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;test.com/posts/hello.html#intro
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;就是这样。现在你应该能够辨别出URL和URN之间的不同。&lt;/p&gt;

&lt;p&gt;如果你忘记了这篇文章的内容，至少要记住一件事：&lt;code&gt;URI可以被分为URL、URN或两者的组合&lt;/code&gt;。如果你一直使用URI这个术语，就不会有错。&lt;/p&gt;
</description>
      </item>
    
      <item>
        <title>Nginx</title>
        <link>http://杨柳青一些事.中国/2015/01/16/Nginx.html</link>
        <guid isPermaLink="true">http://杨柳青一些事.中国/2015/01/16/Nginx.html</guid>
        <pubDate>Fri, 16 Jan 2015 00:00:00 +0800</pubDate>
        <description>&lt;p&gt;简单学习下nginx&lt;/p&gt;

&lt;hr&gt;

&lt;h3&gt;&lt;strong&gt;常用web服务器的介绍&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;apache&lt;/strong&gt;:功能完善，历史悠久 &lt;/p&gt;

&lt;p&gt;缺点：处理每一个php比较费资源，导致如果高并发时会太耗费服务器资源无法处理更多请求。 &lt;/p&gt;

&lt;p&gt;&lt;strong&gt;nginx&lt;/strong&gt;：省资源，省cpu,所以在高并发时能够处理更多的请求，高端能达到3万到5万的并发量。 &lt;/p&gt;

&lt;h3&gt;&lt;strong&gt;nginx的了解&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;Nginx（”engine x”）是俄罗斯人编写的一款高性能的HTTP和反向代理服务器。Nginx是Apache服务器不错的替代品，它能够支持高达50000个并发连接数的响应，而内存，cpu等系统资源消耗却非常低，运行非常稳定。 &lt;/p&gt;

&lt;p&gt;在国内，已经有新浪博客，新浪播客，网易新闻，六间房，56.com,discuz!等多家网站使用Nginx作为web服务器或反向代理服务器。&lt;/p&gt;

&lt;h3&gt;&lt;strong&gt;nginx特点&lt;/strong&gt;&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;可以高并发连接，官方测试能够支撑5万并发连接，在实际生产环境中可以支撑2到4万并发连接。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;内存消耗少&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Nginx+php(FastCGI)服务器再3万并发连接下，开启的10个Nginx进程消耗150MB内存（15MB&lt;em&gt;10=150MB）开启的64个php-cgi进程消耗1280MB内存（20MB&lt;/em&gt;64=1280MB） &lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;成本低廉 &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;购买F5 BIG-IP ,NetScaler等硬件负载均衡交换机需要10多万甚至几十万人民币。而Nginx为开源软件，可以免费试用，并且可用于商业用途。 &lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;其他理由： &lt;/li&gt;
&lt;/ul&gt;

&lt;ol&gt;
&lt;li&gt;配置文件非常简单：通俗易懂，即使非专业管理员也能看懂。 &lt;/li&gt;
&lt;li&gt;支持 rewrite重写规则：能根据域名、URL的不同，将HTTP请求分到不同的后端服务器群组。 &lt;/li&gt;
&lt;li&gt;内置的健康检查功能：如果nginx proxy后端的某台服务器宕机了，不会影响前端访问。 &lt;/li&gt;
&lt;li&gt;节省带宽，支持gzip压缩。 &lt;/li&gt;
&lt;li&gt;稳定性高：用于反向代理，宕机的概率微乎其微。 &lt;/li&gt;
&lt;li&gt;支持热部署。在不间断服务的情况下，对软件版本升级。&lt;/li&gt;
&lt;/ol&gt;

&lt;h3&gt;&lt;strong&gt;支持的操作系统&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;FreeBSD 3.x,4.x,5.x,6.x i386; FreeBSD 5.x,6.x amd64;&lt;/p&gt;

&lt;p&gt;Linux 2.2,2.4,2.6 i386; Linux 2.6 amd64;&lt;/p&gt;

&lt;p&gt;Solaris 8 i386; Solaris 9 i386 and sun4u; Solaris 10 i386;&lt;/p&gt;

&lt;p&gt;MacOS X （10.4） PPC;&lt;/p&gt;

&lt;p&gt;Windows XP，Windows Server 2003和Windows 7&lt;/p&gt;

&lt;h3&gt;&lt;strong&gt;nginx 的安装，（window下面的安装）&lt;/strong&gt;&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;解压软件，并拷贝到指定的目录&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;黑窗口进入到nginx命令所在的目录，执行&lt;code&gt;start nginx&lt;/code&gt;命令即可&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;可以查看是否启动成功,执行&lt;code&gt;netstat -an&lt;/code&gt;命令查看80端口是否开启&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;浏览器进入localhost看是否出现&lt;code&gt;welcome to nginx&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;打完收工-.-真的好简单&lt;/p&gt;

&lt;h3&gt;关于nginx的一些命令&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;start nginx//启动nginx服务。 
nginx -s stop // 停止nginx
nginx -s reload // 重新加载配置文件，无需重启 nginx服务器。
nginx -s quit // 退出nginx
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;strong&gt;虚拟主机的配置&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;简单观察下,发现一个server就是一个虚拟主机则配置如下&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;server{
        listen       80;                #端口号
        server_name  www.lalala.com;    #域名
        location / {
            root    lalala;             #网站根目录
            index index.html index.htm; 
        }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;这只是简单的虚拟主机,并不能解析php文件,并且别忘了配置完成后执行&lt;code&gt;nginx -s reload&lt;/code&gt;重新加载配置文件&lt;/p&gt;

&lt;h3&gt;&lt;strong&gt;配置nginx支持PHP&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;在nginx中，php不是作为一个模块出现在nginx里面。php是作为一个独立进程运行的。该进程的端口是9000端口。当nginx遇到php文件时，交给9000端口来处理。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;配置php加载扩展文件的位置&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;;设置mysql路径
 extension_dir = &amp;quot;F:\PHP\ext&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;配置时区&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;date.timezone = PRC
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;配置让php 作为独立进程运行&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;;让php作为独立进程运行
cgi.fix_pathinfo=1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;打开nginx.conf的配置文件,把如下代码解除封印&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;location ~ \.php$ {
            root           lalala;          #网站根目录
            fastcgi_pass   127.0.0.1:9000;
            fastcgi_index  index.php;
            fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
            include        fastcgi_params;
        }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;重启下nginx,也可以查看是否启动成功,执行&lt;code&gt;netstat -an&lt;/code&gt;命令查看80端口与9000端口是否开启&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;phpinfo()函数测试下是否成功吧-.-&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;&lt;strong&gt;配置nginx expires缓存功能&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;对于图片，css,js等元素更改机会较少，特别是图片，可以将图片设置在浏览器本地缓存365天，css,js缓存10天，这样可以提高下次打开用户页面加载速度，并节省大量带宽。此功能同apache的expires。这里通过location的功能，将需要缓存的扩展名列出来，然后指定缓存时间：&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;location  ~.*\.(gif|jpg|jpeg|png|bmp)$
{   
    root abc;
    expires 365d;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;strong&gt;配置压缩&lt;/strong&gt;&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;gzip on;  
#开启gzip压缩功能
gzip_min_length 1k;
#设置允许压缩的页面最小字节数，页面字节数从header头的content-length中获取。默认值是0,不管页面多大都进行压缩。建议设置成大于1k。如果小于1k可能会越压越大。
gzip_buffers 4 16k;
#压缩缓冲区大小。表示申请4个单位为16k的内容作为压缩结果流缓存，默认值是申请与原始数据大小相同的内存空间来存储gzip压缩结果。
gzip_http_version 1.0;
#压缩版本（默认1.1，前端为squid2.5时使用1.0）用于设置识别http协议版本，默认是1.1,目前大部分浏览器已经支持gzip解压，使用默认即可。
gzip_comp_level 6;
#压缩比率。用来指定gzip压缩比，1压缩比量小，处理速度快；9压缩比量大，传输速度快，但处理最慢，也必将消耗cpu资源。
gzip_types text/plain application/x-javascript text/css application/xml;
#用来指定压缩的类型，“text/html”类型总是会被压缩。
gzip_vary on;
#vary header支持。该选项可以让前端的缓存服务器缓存经过gzip压缩的页面，例如用squid缓存经过nginx压缩的数据。
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;注意：不要对视频和图片配置压缩，对视频和图片压缩比较费资源，而且压缩效果不好。主要压缩对象是文本类型文件。&lt;/p&gt;

&lt;h3&gt;&lt;strong&gt;配置负载均衡&lt;/strong&gt;&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;使用基于端口的虚拟主机可以配置模拟多台服务器：&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;    server {
        listen 81;
        server_name www.abc.com;
        location / {
            root 81;
            index index.html index.htm;
        }
    }
    server {
        listen 82;
        server_name www.abc.com;
        location / {
            root 82;
            index index.html index.htm;
        }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;在nginx目录下面新建81和82的两个目录，并在两个目录里面分别新建两个文件，该两个文件的内容不要一样&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;建立一个连接池&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;upstream  nihao {
        server www.123.com:81;
        server www.123.com:82;
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;配置一个域名为www.123.com的虚拟主机&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;server {
        listen 80;
        server_name www.123.com;
        location /{
            proxy_pass http://nihao; #连接池名字
            proxy_set_header Host $host;
            proxy_set_header X-Peal-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;配置好hosts文件就可以开心的轮询了- -&lt;/li&gt;
&lt;/ul&gt;
</description>
      </item>
    
      <item>
        <title>Mysql主从复制</title>
        <link>http://杨柳青一些事.中国/2014/08/21/Replication.html</link>
        <guid isPermaLink="true">http://杨柳青一些事.中国/2014/08/21/Replication.html</guid>
        <pubDate>Thu, 21 Aug 2014 00:00:00 +0800</pubDate>
        <description>&lt;p&gt;为了减少数据库的压力,我们通常配置多个数据库,把增删改语句放在主数据库中操作,查询放在从数据库中操作&lt;/p&gt;

&lt;h3&gt;&lt;strong&gt;什么是主从复制&lt;/strong&gt;&lt;/h3&gt;

&lt;h3&gt;&lt;strong&gt;主从复制实现原理&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;原理&lt;/strong&gt;:mysql有一种日志,叫做&lt;code&gt;log-bin&lt;/code&gt;日志(二进制日志),它会记录下所有修改过数据库的sql语句,&lt;strong&gt;主从复制&lt;/strong&gt;实际上是多台服务器都开启log-bin日志,主服务器会把sql语句保存到log-bin日志中,主服务器更新log-bin日志后会告知从服务器,从服务器通过主服务器grant授权的用户查询主服务器的log-bin日志,并把日志文件里的sql语句执行一遍,则实现了数据同步&lt;/p&gt;

&lt;h3&gt;&lt;strong&gt;如何授权一个用户&lt;/strong&gt;&lt;/h3&gt;

&lt;h4&gt;&lt;code&gt;mysql添加账号&lt;/code&gt;&lt;/h4&gt;

&lt;p&gt;语法：grant 权限  on  指定数据库和表   to “用户名”@’可以登录主机的ip地址’  identified by ‘密码’&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;grant all  on *.* to ‘lalala’@’%’  identified by ‘papapa’;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;code&gt;mysql删除账号&lt;/code&gt;&lt;/h4&gt;

&lt;p&gt;语法：drop user ‘用户名’@’授权登录主机的ip地址’&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;drop user ‘lalala’@’%’
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;strong&gt;log-bin日志&lt;/strong&gt;&lt;/h3&gt;

&lt;h4&gt;&lt;code&gt;1 开启log-bin日志&lt;/code&gt;&lt;/h4&gt;

&lt;p&gt;打开mysql的配置文件：my.ini(window)     my.cnf  (linux)&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;# 数据库主从复制,mysql-bin 是二进制日志文件的名称,默认是存储数据库文件同一级目录,可以自己指定,比如log-bin=f:/lalala.txt
log-bin=mysql-bin
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;之后重启mysql服务，会产生新的一个日志文件(&lt;code&gt;每次重启都会产生新的&lt;/code&gt;)&lt;/p&gt;

&lt;h4&gt;&lt;code&gt;2 和log-bin日志相关的几个函数&lt;/code&gt;&lt;/h4&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;reset master&lt;br&gt;
清空所有的 log-bin日志，并产生一个新的log-bin日志文件。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;flush logs&lt;br&gt;
产生新的一个log-bin日志文件。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;show master status&lt;br&gt;
查看最新的一个log-bin日志的文件名称，并包含pos位置(&lt;code&gt;记录sql语句在log-bin日志文件中的位置&lt;/code&gt;)&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;/public/img/technology/Replication.png&quot; alt=&quot;1&quot;&gt;&lt;/p&gt;

&lt;p&gt;上图的数字就是pos代表的位置&lt;/p&gt;

&lt;h4&gt;&lt;code&gt;3 查看log-bin日志文件里面的内容&lt;/code&gt;&lt;/h4&gt;

&lt;p&gt;使用在mysql的安装目录的bin目录下面的mysqlbinlog.exe命令来完成查看&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;mysqlbinlog   --no-defaults    日志文件的名称（包含全路径）
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;code&gt;4 完成log-bin日志恢复数据&lt;/code&gt;&lt;/h4&gt;

&lt;p&gt;只需要把日志文件里面的sql语句执行一遍，即可完成数据恢复&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;mysqlbinlog --no-defaults 日志文件的名称（路径）| mysql –u用户名 –p密码 数据库的名称
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;如果想恢复具体位置的sql数据,只需查找记录增删改sql语句在log-bin日志文件中的pos 开始位置和结束位置&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;mysqlbinlog --no-defaults --start-position=”开始位置” --stop-position=”结束的位置” 日志文件的名称（路径）| mysql –u用户名 –p密码 数据库的名称 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;strong&gt;主从配置&lt;/strong&gt;&lt;/h3&gt;

&lt;h3&gt;主服务器配置流程&lt;/h3&gt;

&lt;h4&gt;&lt;code&gt;1 修改my.ini,添加如下语句&lt;/code&gt;&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;log-bin=mysql-bin

server-id=1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;code&gt;2 重启mysql服务器&lt;/code&gt;&lt;/h4&gt;

&lt;h4&gt;&lt;code&gt;3 授权从服务器读取log-bin日志信息用户&lt;/code&gt;&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;grant replication slave on *.* to &amp;#39;lalala&amp;#39;@&amp;#39;%&amp;#39; identified by &amp;#39;lalala&amp;#39;;#replication slave 分配复制的权限
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;code&gt;4 查看主服务器最新的log-bin日志信息&lt;/code&gt;&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;Show master status;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;从服务器配置流程&lt;/h3&gt;

&lt;h4&gt;&lt;code&gt;1 修改my.ini,增加如下配置：&lt;/code&gt;&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;log-bin=mysql-bin   #二进制日志文件
server-id=2         #每台服务器id不能一样
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;code&gt;2 重启mysql服务器&lt;/code&gt;&lt;/h4&gt;

&lt;h4&gt;&lt;code&gt;3 进入到mysql命令行后执行下面命令：&lt;/code&gt;&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;    stop slave;         #关闭从服务
    reset slave all;        #删除从服务器的配置
    change master to master_host=&amp;quot;192.168.28.65&amp;quot;,master_user=&amp;quot;lalala&amp;quot;,master_password =&amp;quot;lalala&amp;quot; ,master_log_file=&amp;quot;mysql-bin.000002&amp;quot;,master_log_pos=107； #配置与主服务器的链接
    start slave;            #开启从服务
    show slave status;      #查看主从服务状态是否成功
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;Slave_IO_Running:Yes&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;此进程负责从服务器从主服务器上读取binlog 日志，并写入从服务器上的中继日志&lt;/p&gt;

&lt;p&gt;&lt;code&gt;Slave_SQL_Running:Yes&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;此进程负责读取并且执行中继日志中的binlog日志&lt;/p&gt;

&lt;p&gt;注：以上两个都为yes则表明成功，只要其中一个进程的状态是no，则表示复制进程停止，错误原因可以从&lt;code&gt;last_error&lt;/code&gt;字段的值中看到。
通过在主服务器上面创建一个新的数据库，并创建一张新表，并添加记录，查看从服务器是否同步来完成测试。
配置完成后，要禁止对从服务器执行增删改的操作。&lt;/p&gt;

&lt;h3&gt;如何撤销从服务器&lt;/h3&gt;

&lt;p&gt;在从服务器上面执行：&lt;/p&gt;

&lt;p&gt;停止从服务器：&lt;code&gt;stop slave;&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;删除从服务器的一些配置：&lt;code&gt;reset slave all;&lt;/code&gt;&lt;/p&gt;

&lt;h3&gt;在项目中如何使用主从配置，完成读写分离&lt;/h3&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-php&quot; data-lang=&quot;php&quot;&gt;&lt;span class=&quot;lineno&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;class  mysql{&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;  $dbm=主服务器 &lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;  $dbs1=从服务器 &lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;  $dbs2=从服务器 &lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;  public function query(){&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;6&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;  #在query里面进行语句判断，分析连接不同的mysql服务器。如果是增删改的操作，就连接主服务器，如果是查询操作，则随机连接从服务器。&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;7&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;  }&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;读写分离在TP框架里面实现&lt;/h3&gt;

&lt;p&gt;修改TP框架项目的配置文件：&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-php&quot; data-lang=&quot;php&quot;&gt;&lt;span class=&quot;lineno&quot;&gt; 1&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;&amp;#39;DB_DEPLOY_TYPE&amp;#39;=&amp;gt;1,//分布式数据库支持&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 2&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;&amp;#39;DB_TYPE&amp;#39;               =&amp;gt; &amp;#39;mysql&amp;#39;,     // 数据库类型&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 3&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;&amp;#39;DB_HOST&amp;#39;               =&amp;gt; &amp;#39;localhost,192.168.1.1&amp;#39;, // 服务器地址，多个用逗号隔开，默认第一个是主服务器，其余是从服务器。&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 4&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;&amp;#39;DB_NAME&amp;#39;               =&amp;gt; &amp;#39;php,php&amp;#39;,          // 数据库名&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 5&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;&amp;#39;DB_USER&amp;#39;               =&amp;gt; &amp;#39;root,lalala&amp;#39;,      // 用户名&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 6&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;&amp;#39;DB_PWD&amp;#39;                =&amp;gt; &amp;#39;root,lalala&amp;#39;,          // 密码&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 7&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;&amp;#39;DB_PORT&amp;#39;               =&amp;gt; &amp;#39;3306&amp;#39;,        // 端口&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 8&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;&amp;#39;DB_PREFIX&amp;#39;             =&amp;gt; &amp;#39;&amp;#39;,&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 9&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;&amp;#39;DB_RW_SEPARATE&amp;#39;=&amp;gt;true,//支持读写分离 &lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;&amp;#39;DB_MASTER_NUM&amp;#39;         =&amp;gt;  1, // 读写分离后 主服务器数量&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;11&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;&amp;#39;DB_SLAVE_NO&amp;#39;       =&amp;gt;  &amp;#39;&amp;#39;, // 指定从服务器序号，如果为空，则随机连接从服务器。&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
</description>
      </item>
    
      <item>
        <title>几个简单的排序算法</title>
        <link>http://杨柳青一些事.中国/2014/06/11/Simple%20Algorithm.html</link>
        <guid isPermaLink="true">http://杨柳青一些事.中国/2014/06/11/Simple%20Algorithm.html</guid>
        <pubDate>Wed, 11 Jun 2014 00:00:00 +0800</pubDate>
        <description>&lt;blockquote&gt;
&lt;p&gt;&amp;quot;内心强大才是真的强大&amp;quot;---子应该没有曰过 -,-&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;数据结构: 数据存储的方式(存储介质)
算法: 数据运算方式(代码)&lt;/p&gt;

&lt;p&gt;常见的排序算法有四种: &lt;code&gt;冒泡&lt;/code&gt;, &lt;code&gt;插入&lt;/code&gt;,&lt;code&gt;选择&lt;/code&gt;和&lt;code&gt;快速&lt;/code&gt;排序&lt;/p&gt;

&lt;hr&gt;

&lt;h3&gt;&lt;strong&gt;冒泡排序&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;冒泡: bubble&lt;/p&gt;

&lt;p&gt;冒泡排序: 将所有的数据比作一个一个的泡,数据大小代表泡的大小. 泡越大意味着浮力越大,就会最先升上去.&lt;/p&gt;

&lt;p&gt;冒泡原理: 对数组进行多次遍历, 每次遍历都能找出最大的泡(剩余部分),将最大的泡放到数组的最后.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-php&quot; data-lang=&quot;php&quot;&gt;&lt;span class=&quot;lineno&quot;&gt; 1&lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;&amp;lt;?php&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 2&lt;/span&gt; 
&lt;span class=&quot;lineno&quot;&gt; 3&lt;/span&gt;  &lt;span class=&quot;nv&quot;&gt;$arr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;56&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 4&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;//冒泡算法&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 5&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;//外层循环,控制冒泡次数&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 6&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 7&lt;/span&gt;      &lt;span class=&quot;c1&quot;&gt;//内层循环:进行交换,冒出当前一轮的最大泡&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 8&lt;/span&gt;      &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 9&lt;/span&gt;          &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]){&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;10&lt;/span&gt;              &lt;span class=&quot;nv&quot;&gt;$temp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;11&lt;/span&gt;              &lt;span class=&quot;nv&quot;&gt;$arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;12&lt;/span&gt;              &lt;span class=&quot;nv&quot;&gt;$arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$j&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$temp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;13&lt;/span&gt;          &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;14&lt;/span&gt;      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;15&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;16&lt;/span&gt;  &lt;span class=&quot;nb&quot;&gt;var_dump&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;分析: 因为后面的是j+1，所以j的比较次数需要总元素个数-1，才能保证j+1不超出下标范围，而已经浮出水面的泡不必再比较，所以需要减掉$i.&lt;/p&gt;

&lt;h3&gt;&lt;strong&gt;快速排序&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;快速排序: 排序的速度快,利用递归实现&lt;/p&gt;

&lt;p&gt;递归是用空间换时间(短时间内使用较多的内存来进行运算),更多递归知识见&lt;a href=&quot;http://arrowjustdoit.github.io/2014/06/11/Recursive-Traversal.html&quot;&gt;php递归遍历文件夹&lt;/a&gt;&lt;/p&gt;

&lt;h3&gt;快速排序原理&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;从一个数组中取出一个元素&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;将剩余的其他元素挨个与取出的元素进行比较: 如果比当前元素小,存放到一个数组;如果比它大,存放到另外一个数组. 结束以后, 当前的中间元素已经确定其位置.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;但是剩下的两个数组有可能没有排好序: 也需要排序,与父问题一样: 递归点&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;如果数组只有一个元素,说明一定已经排好序,就不需要再调用函数排序: 递归出口&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-php&quot; data-lang=&quot;php&quot;&gt;&lt;span class=&quot;lineno&quot;&gt; 1&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;/*&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 2&lt;/span&gt; &lt;span class=&quot;x&quot;&gt; * @param1 array $arr 待排序的数组&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 3&lt;/span&gt; &lt;span class=&quot;x&quot;&gt; * @return array 排序好的数组&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 4&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;*/&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 5&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;function quick_sort($arr){&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 6&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     //取出数组长度,如果小于等于1则排好序(递归出口)&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 7&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     $len = count($arr);&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 8&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     if($len &amp;lt;= 1)return $arr;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 9&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     //取出比较数据&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     $data = $arr[0];&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;11&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     //比较,小于$data的数据放左边数组,大于的放右边数组&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;12&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     $left = $right = array();&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;13&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     for($i = 1;$i &amp;lt; $len;$i++){&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;14&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;         if($arr[$i] &amp;lt; $data){&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;15&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;             $left[] = $arr[$i];&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;16&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;         }else{&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;17&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;             $right[] = $arr[$i];&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;18&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;         }&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;19&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     }&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;20&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     //递归点(可能左边和右边数组未排好序,则递归~)&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;21&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     $left = quick_sort($left);&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;22&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     $right = quick_sort($right);&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;23&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     //合并数组&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;24&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     return array_merge($left, array($data), $right);&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;25&lt;/span&gt; &lt;span class=&quot;x&quot;&gt; }&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
</description>
      </item>
    
      <item>
        <title>Cookie禁用了，Session还能用吗？</title>
        <link>http://杨柳青一些事.中国/2014/06/07/Cookie-and-Session-advance.html</link>
        <guid isPermaLink="true">http://杨柳青一些事.中国/2014/06/07/Cookie-and-Session-advance.html</guid>
        <pubDate>Sat, 07 Jun 2014 00:00:00 +0800</pubDate>
        <description>&lt;p&gt;很必要的一个问题,因为有一部分童鞋觉得cookie不安全,于是就禁用cookie,结果session就哭了-,-&lt;/p&gt;

&lt;hr&gt;

&lt;h3&gt;session哭了&lt;/h3&gt;

&lt;p&gt;　　Cookie与 Session，一般认为是两个独立的东西，Session采用的是在服务器端保持状态的方案，而Cookie采用的是在客户端保持状态的方案。但为什么禁用Cookie就不能得到Session呢？因为Session是用&lt;code&gt;Session ID&lt;/code&gt;来确定当前对话所对应的服务器Session，而&lt;code&gt;Session ID是通过Cookie来传递&lt;/code&gt;的，禁用Cookie相当于失去了Session ID，也就得不到Session了。&lt;/p&gt;

&lt;h3&gt;session不哭,站起来撸&lt;/h3&gt;

&lt;p&gt;　　Session，储存于服务器端（默认以文件方式存储Session），&lt;code&gt;根据客户端提供的Session ID来得到用户的文件，取得变量的值&lt;/code&gt;，Session ID可以使用客户端的Cookie或者Http1.1协议的Query_String（就是访问的URL的“?”后面的部分）来传送给服务器，然后服务器读取Session的目录……。也就是说，&lt;code&gt;Session ID是取得存储在服务上的Session变量的身份证&lt;/code&gt;。&lt;/p&gt;

&lt;p&gt;　　当代码session&lt;em&gt;start();运行的时候，就在服务器上&lt;code&gt;产生了一个Session文件，随之也产生了与之唯一对应的一个Session ID&lt;/code&gt;，定义Session变量以一定形式存储刚才产生的Session文件。通过Session ID，可以取出定义的变量。跨页后，为了使用Session，你必须又执行session&lt;/em&gt;start();将&lt;code&gt;又会产生一个Session文件，与之对应产生相应的Session ID&lt;/code&gt;，用这个session id是取不出前面提到的第一个Session文件中的变量的，因为这个Session ID不是打开它的“钥匙”。&lt;code&gt;如果在session_start();之前加代码session_id($session id);将不产生新的Session文件，直接读取与这个id对应的Session文件&lt;/code&gt;。&lt;/p&gt;

&lt;p&gt;我们可以抛开Cookie使用Session，即假定用户关闭Cookie的情况下使用Session，其实现途径有以下几种：&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;设置php.ini配置文件中的&lt;code&gt;session.use_trans_sid = 1&lt;/code&gt;，或者编译时打开打开了&lt;code&gt;--enable-trans-sid&lt;/code&gt;选项，让PHP自动跨页传递Session ID。&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-php&quot; data-lang=&quot;php&quot;&gt;&lt;span class=&quot;lineno&quot;&gt; 1&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;-------------------------------------------------------------------------------------------------------------------&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 2&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       &lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?php&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 3&lt;/span&gt;            &lt;span class=&quot;c1&quot;&gt;// s1.php&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 4&lt;/span&gt;            &lt;span class=&quot;nb&quot;&gt;session_start&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 5&lt;/span&gt;            &lt;span class=&quot;nv&quot;&gt;$_SESSION&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;lalala&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;papapa&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 6&lt;/span&gt;            &lt;span class=&quot;nv&quot;&gt;$url&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;&amp;lt;a href=&amp;#39;s2.php&amp;#39;&amp;gt;下一页&amp;lt;/a&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 7&lt;/span&gt;            &lt;span class=&quot;k&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 8&lt;/span&gt;        &lt;span class=&quot;cp&quot;&gt;?&amp;gt;&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 9&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       -------------------------------------------------------------------------------------------------------------------&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;10&lt;/span&gt; 
&lt;span class=&quot;lineno&quot;&gt;11&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       -------------------------------------------------------------------------------------------------------------------&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;12&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       &lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?php&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;13&lt;/span&gt;            &lt;span class=&quot;c1&quot;&gt;// s2.php&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;14&lt;/span&gt;            &lt;span class=&quot;nb&quot;&gt;session_start&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;15&lt;/span&gt;            &lt;span class=&quot;k&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$_SESSION&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;lalala&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;16&lt;/span&gt;        &lt;span class=&quot;cp&quot;&gt;?&amp;gt;&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;17&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       -------------------------------------------------------------------------------------------------------------------&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;运行以上代码，在客户端cookie正常的情况下，应该可以得到结果&amp;quot;papapa&amp;quot;。
现在你手动关闭客户端的cookie，再运行，可能得不到结果了吧。如果得不到结果，再设置php.ini文件中的&lt;code&gt;session.use_trans_sid = 1&lt;/code&gt;，或者编译时打开打开了&lt;code&gt;--enable-trans-sid选项&lt;/code&gt;，又得到结果“papapa”。 &lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;手动通过URL传值、隐藏表单传递Session ID。&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-php&quot; data-lang=&quot;php&quot;&gt;&lt;span class=&quot;lineno&quot;&gt; 1&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;-------------------------------------------------------------------------------------------------------------------&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 2&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       &lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?php&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 3&lt;/span&gt;            &lt;span class=&quot;c1&quot;&gt;// s1.php&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 4&lt;/span&gt;            &lt;span class=&quot;nb&quot;&gt;session_start&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 5&lt;/span&gt;            &lt;span class=&quot;nv&quot;&gt;$_SESSION&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;lalala&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;papapa&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 6&lt;/span&gt;            &lt;span class=&quot;nv&quot;&gt;$sn&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;session_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 7&lt;/span&gt;            &lt;span class=&quot;nv&quot;&gt;$url&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;&amp;lt;a href=&amp;#39;s2.php?sn=&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$sn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;&amp;#39;&amp;gt;下一页&amp;lt;/a&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 8&lt;/span&gt;            &lt;span class=&quot;k&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 9&lt;/span&gt;        &lt;span class=&quot;cp&quot;&gt;?&amp;gt;&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       -------------------------------------------------------------------------------------------------------------------&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;11&lt;/span&gt; 
&lt;span class=&quot;lineno&quot;&gt;12&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       -------------------------------------------------------------------------------------------------------------------&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;13&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       &lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?php&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;14&lt;/span&gt;            &lt;span class=&quot;c1&quot;&gt;// s2.php&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;15&lt;/span&gt;            &lt;span class=&quot;nb&quot;&gt;session_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$_GET&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;sn&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;16&lt;/span&gt;            &lt;span class=&quot;nb&quot;&gt;session_start&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;17&lt;/span&gt;            &lt;span class=&quot;k&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$_SESSION&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;lalala&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;18&lt;/span&gt;        &lt;span class=&quot;cp&quot;&gt;?&amp;gt;&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;19&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       -------------------------------------------------------------------------------------------------------------------&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;ul&gt;
&lt;li&gt;用文件、数据库等形式保存Session ID，在跨页过程中手动调用。&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-php&quot; data-lang=&quot;php&quot;&gt;&lt;span class=&quot;lineno&quot;&gt; 1&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;-------------------------------------------------------------------------------------------------------------------&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 2&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       login.html&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 3&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       &amp;lt;!DOCTYPE HTML PUBLIC &amp;quot;-//W3C//DTD HTML 4.01 Transitional//EN&amp;quot;&amp;gt; &lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 4&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       &amp;lt;html&amp;gt; &lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 5&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       &amp;lt;head&amp;gt; &lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 6&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       &amp;lt;title&amp;gt;Login&amp;lt;/title&amp;gt; &lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 7&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       &amp;lt;meta http-equiv=&amp;quot;Content-Type&amp;quot; content=&amp;quot;text/html; charset=gb2312&amp;quot;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 8&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       &amp;lt;/head&amp;gt; &lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 9&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       &amp;lt;body&amp;gt; &lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       请登录： &lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;11&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       &amp;lt;form name=&amp;quot;login&amp;quot; method=&amp;quot;post&amp;quot; action=&amp;quot;mylogin1.php&amp;quot;&amp;gt; &lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;12&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       用户名:&amp;lt;input type=&amp;quot;text&amp;quot; name=&amp;quot;name&amp;quot;&amp;gt;&amp;lt;br&amp;gt; &lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;13&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       口　令:&amp;lt;input type=&amp;quot;password&amp;quot; name=&amp;quot;pass&amp;quot;&amp;gt;&amp;lt;br&amp;gt; &lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;14&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       &amp;lt;input type=&amp;quot;submit&amp;quot; value=&amp;quot;登录&amp;quot;&amp;gt; &lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;15&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       &amp;lt;/form&amp;gt; &lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;16&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       &amp;lt;/body&amp;gt; &lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;17&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       &amp;lt;/html&amp;gt; &lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;18&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       -------------------------------------------------------------------------------------------------------------------&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;19&lt;/span&gt; 
&lt;span class=&quot;lineno&quot;&gt;20&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       -------------------------------------------------------------------------------------------------------------------&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;21&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       mylogin1.php&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;22&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       &lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?php&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;23&lt;/span&gt;        &lt;span class=&quot;nv&quot;&gt;$name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$_POST&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;’name’&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;24&lt;/span&gt;        &lt;span class=&quot;nv&quot;&gt;$pass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$_POST&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;’pass’&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;25&lt;/span&gt;        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$pass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;26&lt;/span&gt;            &lt;span class=&quot;k&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;用户名或密码为空，请&amp;lt;a href=&amp;#39;login.html&amp;#39;&amp;gt;重新登录&amp;lt;/a&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;27&lt;/span&gt;            &lt;span class=&quot;k&quot;&gt;die&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;28&lt;/span&gt;        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;29&lt;/span&gt;        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;lalala&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$pass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;papapa&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;30&lt;/span&gt;            &lt;span class=&quot;k&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;用户名或密码不正确，请&amp;lt;a href=&amp;#39;login.html&amp;#39;&amp;gt;重新登录&amp;lt;/a&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#随便测试写,不要注意这些细节-,-&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;31&lt;/span&gt;            &lt;span class=&quot;k&quot;&gt;die&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;32&lt;/span&gt;        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;33&lt;/span&gt;        &lt;span class=&quot;c1&quot;&gt;//注册用户&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;34&lt;/span&gt;        &lt;span class=&quot;nb&quot;&gt;ob_start&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;                                &lt;span class=&quot;c1&quot;&gt;#ob缓存&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;35&lt;/span&gt;        &lt;span class=&quot;nb&quot;&gt;session_start&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;                           &lt;span class=&quot;c1&quot;&gt;#session开启&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;36&lt;/span&gt;        &lt;span class=&quot;nv&quot;&gt;$_SESSION&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;’user’&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;             &lt;span class=&quot;c1&quot;&gt;#设置session&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;37&lt;/span&gt;        &lt;span class=&quot;nv&quot;&gt;$psid&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;session_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;                     &lt;span class=&quot;c1&quot;&gt;#保存session id&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;38&lt;/span&gt;        &lt;span class=&quot;nv&quot;&gt;$fp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;fopen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;D:&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;mp\phpsid.txt&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;w+&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;      &lt;span class=&quot;c1&quot;&gt;#打开文件&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;39&lt;/span&gt;        &lt;span class=&quot;nb&quot;&gt;fwrite&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$fp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$psid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;                       &lt;span class=&quot;c1&quot;&gt;#把session id写入文件&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;40&lt;/span&gt;        &lt;span class=&quot;nb&quot;&gt;fclose&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$fp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;                                &lt;span class=&quot;c1&quot;&gt;#关闭文件&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;41&lt;/span&gt;        &lt;span class=&quot;c1&quot;&gt;//身份验证成功，进行相关操作&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;42&lt;/span&gt;        &lt;span class=&quot;k&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;已登录&amp;lt;br&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;43&lt;/span&gt;        &lt;span class=&quot;k&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;&amp;lt;a href=&amp;#39;mylogin2.php&amp;#39;&amp;gt;下一页&amp;lt;/a&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;44&lt;/span&gt;        &lt;span class=&quot;cp&quot;&gt;?&amp;gt;&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;45&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       -------------------------------------------------------------------------------------------------------------------&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;46&lt;/span&gt; 
&lt;span class=&quot;lineno&quot;&gt;47&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       -------------------------------------------------------------------------------------------------------------------&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;48&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       mylogin2.php&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;49&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       &lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?php&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;50&lt;/span&gt;        &lt;span class=&quot;nv&quot;&gt;$fp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;fopen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;D:&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;mp\phpsid.txt&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;r&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;       &lt;span class=&quot;c1&quot;&gt;#打开文件&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;51&lt;/span&gt;        &lt;span class=&quot;nv&quot;&gt;$sid&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;fread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$fp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1024&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;                 &lt;span class=&quot;c1&quot;&gt;#取出session id&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;52&lt;/span&gt;        &lt;span class=&quot;nb&quot;&gt;fclose&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$fp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;                                &lt;span class=&quot;c1&quot;&gt;#关闭文件&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;53&lt;/span&gt;        &lt;span class=&quot;nb&quot;&gt;session_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$sid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;                       &lt;span class=&quot;c1&quot;&gt;#设置session id&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;54&lt;/span&gt;        &lt;span class=&quot;nb&quot;&gt;session_start&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;                           &lt;span class=&quot;c1&quot;&gt;#开启session&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;55&lt;/span&gt;        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;isset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$_SESSION&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;’user’&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$_SESSION&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;’user’&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;laigw&amp;quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;56&lt;/span&gt;            &lt;span class=&quot;k&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;已登录!&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;57&lt;/span&gt;        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;58&lt;/span&gt;            &lt;span class=&quot;c1&quot;&gt;//成功登录进行相关操作&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;59&lt;/span&gt;            &lt;span class=&quot;k&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;未登录，无权访问&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;60&lt;/span&gt;            &lt;span class=&quot;k&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;请&amp;lt;a href=&amp;quot;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;login&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;html&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;&amp;gt;登录&amp;lt;/a&amp;gt;后浏览&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;61&lt;/span&gt;            &lt;span class=&quot;k&quot;&gt;die&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;62&lt;/span&gt;        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;63&lt;/span&gt;        &lt;span class=&quot;cp&quot;&gt;?&amp;gt;&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;64&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;       -------------------------------------------------------------------------------------------------------------------&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;同样请关闭Cookie测试，用户名：lalala；密码：lalala；这是通过文件保存Session ID的，文件是：D:/tmp/phpsid.txt，请根据自己的系统决定文件名或路径。 &lt;/p&gt;

&lt;p&gt;总结一下，上面的方法有一个共同点，就是在前一页取得Session ID，然后想办法传递到下一页，在下一页的session_start();代码之前加代码Session ID(传过来的Session ID)。&lt;/p&gt;

&lt;p&gt;打完收工:p&lt;/p&gt;
</description>
      </item>
    
      <item>
        <title>Cookie与Session -- 原理</title>
        <link>http://杨柳青一些事.中国/2014/05/30/Cookie-and-Session-principle.html</link>
        <guid isPermaLink="true">http://杨柳青一些事.中国/2014/05/30/Cookie-and-Session-principle.html</guid>
        <pubDate>Fri, 30 May 2014 00:00:00 +0800</pubDate>
        <description>&lt;p&gt;之前有写过一篇&lt;a href=&quot;http://arrowjustdoit.github.io/2014/05/25/Cookie-and-Session.html&quot;&gt;Cookie与Session&lt;/a&gt;更多是在讲解写简单的实际操作,今天在网上看到一些通俗易懂的原理,分享下&lt;/p&gt;

&lt;hr&gt;

&lt;h3&gt;&lt;strong&gt;作用&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;　　服务器可以&lt;code&gt;利用Cookies或Session包含信息的任意性来筛选并经常性维护这些信息&lt;/code&gt;，以判断在HTTP传输中的状态。它们最典型的应用是&lt;code&gt;判定注册用户是否已经登录网站&lt;/code&gt;，用户可能会得到提示，是否在下一次进入此网站时保留用户信息以便简化登录手续。另一个重要应用场合是&lt;code&gt;“购物车”&lt;/code&gt;之类处理。用户可能会在一段时间内在同一家网站的不同页面中选择不同的商品，这些信息都会写入Cookies或Session，以便在最后付款时提取信息。总而言之，cookies和session就是能够&lt;code&gt;记录顾客状态&lt;/code&gt;的技术，尽管二者属于不同的技术，但只要cookies能做到的，session也能做到&lt;/p&gt;

&lt;h3&gt;&lt;strong&gt;打个比方&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;　　我常到一家熟食店买馋嘴鸭，该店老板为了促进销售，特发布“每购满10只即可免费赠送一只”的优惠措施。除了家里有什么红白喜事要飨客之外，应该不会有人一次性购买10只烤鸭吧？所以老板得想个法子来记录顾客的消费数量，这里总共有三种方案：&lt;/p&gt;

&lt;p&gt;Ⅰ、老板&lt;code&gt;记住每一个顾客的消费数量&lt;/code&gt;，等到顾客消费满10只的时候自动奉送一只。这好比HTTP协议本身是有状态的，可以记住顾客的活动行为。但遗憾的是，出于种种考虑&lt;code&gt;http协议本身是不能有状态的&lt;/code&gt;，老板自个也没有这么超常的记忆力，故这种方案行不通！&lt;/p&gt;

&lt;p&gt;Ⅱ、老板发给顾客一张&lt;code&gt;积分卡&lt;/code&gt;，上面记录着消费的数量，一般还有个有效期限。每次买烤鸭时，如果顾客出示这张卡片，老板就知道这位顾客曾经光顾过小店。这种做法就是在&lt;code&gt;客户端保持状态&lt;/code&gt;，好比是cookie技术。打开（windows系统）C:\Documents and Settings\用户名\Cookies，你会发现一些*.txt格式的小文件，这就是你浏览某些网站，它们发给你的“积分卡”(cookies)。&lt;/p&gt;

&lt;p&gt;Ⅲ、老板发给顾客一张&lt;code&gt;会员卡&lt;/code&gt;，&lt;code&gt;除了卡号之外什么信息也不纪录&lt;/code&gt;，每次买烤鸭时，如果顾客出示该卡片，则老板搬出店里的划名册，找到你的卡号并加1个积分。这种做法就是在&lt;code&gt;服务器端保持状态&lt;/code&gt;。好比是session技术。&lt;/p&gt;

&lt;h3&gt;&lt;strong&gt;区别和联系&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;cookie和session最大的区别在于： &lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;cookie是把&lt;code&gt;积分卡&lt;/code&gt;发给顾客，上面&lt;code&gt;记录了顾客所有的消费信息&lt;/code&gt;。Session则是把只有&lt;code&gt;卡号&lt;/code&gt;(session id)的积分卡发给顾客，&lt;code&gt;自家记录了顾客所有的消费信息&lt;/code&gt;。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Cookie是保存在&lt;code&gt;客户端&lt;/code&gt;的；session是保存在&lt;code&gt;服务器端&lt;/code&gt;，而session id则是保存在&lt;code&gt;客户端&lt;/code&gt;，通常也是一个cookie小文件，由于这个小文件除了session id(好比卡号)外什么也没有，因此比cookie安全多了。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;具体来说cookie机制采用的是在&lt;code&gt;客户端保持状态&lt;/code&gt;的方案，而session机制采用的是在&lt;code&gt;服务器端保持状态&lt;/code&gt;的方案。同时我们也看到，由于采用服务器端保持状态的方案在客户端也需要保存一个标识，所以session机制可能需要借助于cookie机制来达到保存标识的目的，但实际上它还有其他选择。&lt;/p&gt;

&lt;h3&gt;&lt;strong&gt;原理&lt;/strong&gt;&lt;/h3&gt;

&lt;h3&gt;cookie机制&lt;/h3&gt;

&lt;p&gt;　　正统的cookie分发是通过扩展HTTP协议来实现的，服务器通过在HTTP的响应头中加上一行特殊的指示以提示浏览器按照指示生成相应的cookie。然而纯粹的客户端脚本如JavaScript或者VBScript也可以生成cookie。而cookie的使用是由浏览器按照一定的原则在后台自动发送给服务器的。浏览器检查所有存储的cookie，如果某个cookie所声明的作用范围大于等于将要请求的资源所在的位置，则把该cookie附在请求资源的HTTP请求头上发送给服务器。&lt;/p&gt;

&lt;p&gt;cookie的内容主要包括：名字，值，过期时间，路径和域。路径与域一起构成cookie的作用范围。若不设置过期时间，则表示这个cookie的生命期为浏览器会话期间，关闭浏览器窗口，cookie就消失。这种生命期为浏览器会话期的cookie被称为&lt;code&gt;会话cookie&lt;/code&gt;。会话cookie一般不存储在硬盘上而是保存在内存里，当然这种行为并不是规范规定的。若设置了过期时间，浏览器就会把cookie保存到硬盘上，关闭后再次打开浏览器，这些cookie仍然有效直到超过设定的过期时间。存储在硬盘上的cookie可以在不同的浏览器进程间共享，比如两个IE窗口。而对于保存在内存里的cookie，不同的浏览器有不同的处理方式&lt;/p&gt;

&lt;h3&gt;session机制&lt;/h3&gt;

&lt;p&gt;　　session机制是一种服务器端的机制，服务器使用一种类似于散列表的结构（也可能就是使用散列表）来保存信息。当程序需要为某个客户端的请求创建一个session时，服务器首先检查这个客户端的请求里是否已包含了一个session标识（称为session id），如果已包含则说明以前已经为此客户端创建过session，服务器就按照session id把这个session检索出来使用（检索不到，会新建一个），如果客户端请求不包含session id，则为此客户端创建一个session并且生成一个与此session相关联的session id，session id的值应该是一个既不会重复，又不容易被找到规律以仿造的字符串，这个session id将被在本次响应中返回给客户端保存。 保存这个session id的方式可以采用cookie，这样在交互过程中浏览器可以自动的按照规则把这个标识发挥给服务器。一般这个cookie的名字都是类似于SEEESIONID。但cookie可以被人为的禁止，则必须有其他机制以便在cookie被禁止时仍然能够把session id传递回服务器。 &lt;/p&gt;

&lt;p&gt;打完收工:p&lt;/p&gt;
</description>
      </item>
    
      <item>
        <title>Cookie与Session</title>
        <link>http://杨柳青一些事.中国/2014/05/25/Cookie-and-Session.html</link>
        <guid isPermaLink="true">http://杨柳青一些事.中国/2014/05/25/Cookie-and-Session.html</guid>
        <pubDate>Sun, 25 May 2014 00:00:00 +0800</pubDate>
        <description>&lt;p&gt;最近忙着期末考试,也没有什么时间研究技术了-,- 所以自己整理下平时对session和cookie的理解&lt;/p&gt;

&lt;hr&gt;

&lt;h3&gt;&lt;strong&gt;会话技术&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;会话技术&lt;/strong&gt;: 在一次浏览器打开后,多次访问同一个网站的时候, 都认为当前浏览器是已经访问网站的(服务器记住浏览器): 从而实现跨脚本的共享数据.&lt;/p&gt;

&lt;p&gt;会话技术包含两种: cookie和session技术&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Cookie技术&lt;/strong&gt;: 
是一种服务器通过http协议将数据保存到浏览器端, 然后浏览器又通过http协议将数据携带给服务器的技术. 从而实现服务器识别浏览器的功能.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Session技术&lt;/strong&gt;: 
session是一种将数据保存在服务器端的技术, 通过将”信物”通过http协议(cookie)保存到浏览器端, 浏览器通过cookie将”信物”携带给服务器, 服务器通过”信服”找到对应的数据, 从而实现跨脚本共享数据.&lt;/p&gt;

&lt;h3&gt;&lt;strong&gt;Cookie技术&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;Cookie: 服务器将数据通过HTTP协议保存到浏览器, 然后浏览器在下次访问(HTTP协议)的时候将数据携带给服务器, 实现服务器识别浏览器的目的(数据共享).&lt;/p&gt;

&lt;p&gt;Cookie技术是会话技术的鼻祖&lt;/p&gt;

&lt;p&gt;Cookie技术实现是基于HTTP协议中的两个协议项:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;响应头: set-cookie ,服务器设置数据给浏览器&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;请求头: cookie, 浏览器携带数据给服务器&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;如何设置cookie&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;header实现Cookie&lt;/strong&gt;:修改响应头将数据传递给浏览器&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;Header(‘set-cookie: 名字 = 值’);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Setcookie函数&lt;/strong&gt;:一个专门用于设置cookie的函数&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;Setcookie(名字,值，参数3，参数4，参数5);
Setcookie(&amp;#39;age&amp;#39;,18);                           //参数1：cookie的名字。参数2：cookie的值
Setcookie(&amp;#39;age&amp;#39;,18,time()+10);                 //参数3：Cookie生命周期--&amp;gt;当前时间再过10秒后失效
Setcookie(&amp;#39;age&amp;#39;,18,time()+10,&amp;#39;/&amp;#39;)；            //参数4：Cookie作用范围--&amp;gt;‘/’表示整个网站下都能访问
Setcookie(&amp;#39;age&amp;#39;,18,time()+10,&amp;#39;/&amp;#39;,&amp;#39;lalala.com&amp;#39;);//参数5：Cookie跨域--&amp;gt;默认的,cookie是不能跨域的,这样设置的话只要以lalala.com结束的域名都可以访问
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;如何接收cookie&lt;/h3&gt;

&lt;p&gt;PHP使用一个超全局预定义变量$_COOKIE自动接收所有的cookie数据&lt;/p&gt;

&lt;p&gt;要想接收数组可以通过设置cookie的时候借助于[]实现&lt;/p&gt;

&lt;h3&gt;Cookie总结&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt; Cookie不安全: 谁都可以访问(js),通常不会使用cookie来保存重要的数据&lt;/li&gt;
&lt;li&gt; Cookie适合保存不重要而且数据量大的东西.(视频网站)&lt;/li&gt;
&lt;li&gt; Cookie保存在浏览器端&lt;/li&gt;
&lt;/ol&gt;

&lt;h3&gt;&lt;strong&gt;Session技术&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;Session: 将数据保存在服务器端的技术. 是一种将数据保存到服务器上的文件中.&lt;/p&gt;

&lt;p&gt;Session技术是基于cookie技术实现.&lt;/p&gt;

&lt;p&gt;Session是通过产生sessionID(cookie), 去创建对应的文件,然后将数据保存到文件中, 将sessionid发送给浏览器. 浏览器携带sessionid,服务器能够接收id并且找到文件取出数据.&lt;/p&gt;

&lt;p&gt;核心的工作: 都是由session_start()完成&lt;/p&gt;

&lt;h3&gt;如何设置Session&lt;/h3&gt;

&lt;p&gt;Session技术有两种实现方式(类似mysql中的事务处理): &lt;code&gt;手动session&lt;/code&gt;和&lt;code&gt;自动session&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Session在PHP系统中有一套完整的机制(用户不需要管内部实现), 对外提供了一些可以操作的接口(应用接口: 函数)&lt;/p&gt;

&lt;h3&gt;手动session&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;激活session系统: 让session系统开始工作&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;Session_start(): #开启session机制, 任何要使用session之前都必须开启session机制
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;PHPSESSID这个cookie由session_start()函数产生,就是session数据的”钥匙”&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;存储数据到session中: 使用$_SESSION存储数据&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;Session_start();
$_SESSION[‘name’] = ‘mark’;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;在新的脚本中读取session数据: 任何想使用session的时候都必须开启session&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;Session_start();
Var_dump($_SESSION);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;自动session&lt;/h3&gt;

&lt;p&gt;自动session: session机制一直是打开的,根本不需要用户去开启session.&lt;/p&gt;

&lt;p&gt;用户要做的事情是: 存储数据($&lt;em&gt;SESSION),使用数据($&lt;/em&gt;SESSION)&lt;/p&gt;

&lt;p&gt;要实现自动session: 必须修改配置文件自动开启&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;;session自动开启
;session.auto_start = 1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;通常不会使用自动session.=.=&lt;/p&gt;

&lt;h3&gt;如何删除Session&lt;/h3&gt;

&lt;p&gt;删除session文件: 在开启session之后,session_destroy();&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;Session_start();
Session_destroy();
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Session文件的删除是根据sessionID删除: 一个浏览器的一次请求永远只能删除对应的sessionid的session文件.&lt;/p&gt;

&lt;h3&gt;如何配置Session&lt;/h3&gt;

&lt;p&gt;Session数据的存储方式: 默认是文件&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;修改session数据的存储方式--&amp;gt;存储到文件里面
session.save_handler = files
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Session的存储路径: 默认的是操作系统的临时文件夹&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;;设置session数据的存储位置--&amp;gt;存到文件中
session.save_path = &amp;quot;F:\Program Files (x86)\server\TEMP&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Session是基于cookie: 使用cookie保存sessionid&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;session.use_cookies = 1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Session只允许使用cookie保存sessionid&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;session.use_only_cookies = 1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Session名称: cookie中sessionid的名字&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;session.name = PHPSESSID
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Session默认不是自动开启&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;session.auto_start = 0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Session过期: 因为sessionid的cookie生命周期: 浏览器关闭&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;session.cookie_lifetime = 0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Sessionid的cookie作用范围是整站共享&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;session.cookie_path = /
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Session数据保存是使用php自己的序列化方式(序列化不是对$&lt;em&gt;SESSION序列化,而是对$&lt;/em&gt;SESSION里面的数据进行序列[下标不序列化])&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;session.serialize_handler = php
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Session垃圾回收机制&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;session.gc_probability = 1
session.gc_divisor = 1000           #session_start开启1000次有一次可能触发垃圾回收机制,一次性回收所有垃圾文件
session.gc_maxlifetime = 1440       #session文件的生命周期是24分钟
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Session默认不允许将sessionid存储到a标签里面的href中&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;session.use_trans_sid = 0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Session分层&lt;/h3&gt;

&lt;p&gt;有可能网站的瞬时访问量很大, 会产生很多的session文件: 因为操作系统寻找文件是逐个匹配: 效率特别低.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;解决方案1: 将session文件放到不同的文件夹下: 以sessionID的首字母为文件夹&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code&gt;使用分层的缺点1&lt;/code&gt;: 需要手动创建文件夹(系统不会自动创建)&lt;/p&gt;

&lt;p&gt;为了保证安全性: 必须手动创建36个(26个字母+10个数字)文件夹,如果分成两层: 36 * 36个文件&lt;/p&gt;

&lt;p&gt;&lt;code&gt;使用分层的缺点2&lt;/code&gt;: 文件读取有i/o限制(并发问题)&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;解决方案2:将session保存到数据库(数据库的并发量比文件要高的多:  数据库可以是非关系型数据库[内存])&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;打完收工:p&lt;/p&gt;
</description>
      </item>
    
      <item>
        <title>php文件上传</title>
        <link>http://杨柳青一些事.中国/2014/05/01/files-upload.html</link>
        <guid isPermaLink="true">http://杨柳青一些事.中国/2014/05/01/files-upload.html</guid>
        <pubDate>Thu, 01 May 2014 00:00:00 +0800</pubDate>
        <description>&lt;p&gt;通过 PHP，可以把文件上传到&lt;code&gt;服务器&lt;/code&gt;&lt;/p&gt;

&lt;h3&gt;什么是文件上传&lt;/h3&gt;

&lt;p&gt;把&lt;code&gt;浏览器&lt;/code&gt;所在电脑的文件存放到&lt;code&gt;服务器&lt;/code&gt;上, 这个过程称之为文件上传&lt;/p&gt;

&lt;p&gt;上传分为两个部分: &lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;将浏览器所在电脑的文件选中,提交给服务器,服务器要接收文件.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;服务器必须要接收文件: apache不能接收文件,PHP负责接收.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3&gt;前期准备&lt;/h3&gt;

&lt;h4&gt;&lt;code&gt;设置php.ini&lt;/code&gt;&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;确保上传功能被打开&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;file_uploads = On
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;设置上传文件的临时存放目录&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;upload_tmp_dir =&amp;quot;E:\PHP\upload&amp;quot;      #;设置文件上传临时保存路径,默认是在c:/windows/temp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;code&gt;设置文件表单域&lt;/code&gt;&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&amp;lt;input type=’file’ name=’myfile’&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;code&gt;设置post提交二进制&lt;/code&gt;&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;enctype=”multipart/form-data”
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;code&gt;$_FILES获取的数据&lt;/code&gt;&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-php&quot; data-lang=&quot;php&quot;&gt;&lt;span class=&quot;lineno&quot;&gt; 1&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;array(1) {&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 2&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;  [&amp;quot;myfile&amp;quot;]=&amp;gt;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 3&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;  array(5) {&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 4&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;    [&amp;quot;name&amp;quot;]=&amp;gt;                                          #上传文件的文件名&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 5&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;    string(10) &amp;quot;123123.jpg&amp;quot;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 6&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;    [&amp;quot;type&amp;quot;]=&amp;gt;                                          #上传文件的类型:大类型/格式  称为MIME类型&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 7&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;    string(10) &amp;quot;image/jpeg&amp;quot;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 8&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;    [&amp;quot;tmp_name&amp;quot;]=&amp;gt;                                      #上传到服务器时临时存储文件路径&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 9&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;    string(38) &amp;quot;E:\PHP\upload\php7FC2.tmp&amp;quot;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;    [&amp;quot;error&amp;quot;]=&amp;gt;                                         #错误描述码&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;11&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;    int(0)&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;12&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;    [&amp;quot;size&amp;quot;]=&amp;gt;                                          #上传文件大小&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;13&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;    int(6340)&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;14&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;  }&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;15&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;使用的函数&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Move_uploaded_file(文件所在目录[文件名], 文件要存储的目录[带文件名])&lt;/code&gt;移动文件--&amp;gt;原文件不存在&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Copy(文件所在目录,文件要存储的目录&lt;/code&gt;复制文件--&amp;gt;原文件存在&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;使用时注意的问题&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;move_uploaded_file()&lt;/code&gt;会事先检测源文件是否通过php上传过来的，否则不予移动(&lt;code&gt;只能用post&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;move_uploaded_file()&lt;/code&gt;这个函数虽然&lt;code&gt;多次调用但是只能执行一次&lt;/code&gt;，原因就在于&lt;code&gt;move_uploaded_file()&lt;/code&gt;只支持post提交的信息，也就是用户只提交了一个post，第一次调用被执行后，之后就不是post的值也就是说不在执行了，解决办法就是&lt;code&gt;用copy代替move_uploaded_file()&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;封装一个上传文件函数&lt;/h3&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-php&quot; data-lang=&quot;php&quot;&gt;&lt;span class=&quot;lineno&quot;&gt; 1&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;/*&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 2&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;  * 上传文件&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 3&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;  * @param1 array $file,要上传的文件信息&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 4&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;  * @param2 string $path,文件要上传的路径&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 5&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;  * @param3 string &amp;amp;$error,记录错误信息&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 6&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;  * @return string 文件的名字(新名字)&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 7&lt;/span&gt; &lt;span class=&quot;x&quot;&gt; */&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 8&lt;/span&gt; &lt;span class=&quot;x&quot;&gt; function upload($file,$path,&amp;amp;$error){&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 9&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     //定义错误信息: 专门记录错误: 在函数外部能访问&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     //验证$file的合法性&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;11&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     if(!is_array($file)){&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;12&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;         //不是数组&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;13&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;         $error = &amp;#39;上传文件不合法!&amp;#39;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;14&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;         return false;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;15&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     }&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;16&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     //验证系统错误处理&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;17&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     switch($file[&amp;#39;error&amp;#39;]){&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;18&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;         case 1:&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;19&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;             $error = &amp;#39;文件过大,超过服务器允许的大小!&amp;#39;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;20&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;             return false;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;21&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;         case 2:&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;22&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;             $error = &amp;#39;文件超过浏览器允许的大小!&amp;#39;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;23&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;             return false;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;24&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;         case 3:&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;25&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;             $error = &amp;#39;文件只上传部分!&amp;#39;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;26&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;             return false;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;27&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;         case 4:&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;28&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;             $error = &amp;#39;用户没有选中要上传的文件!&amp;#39;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;29&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;             return false;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;30&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;         case 6:&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;31&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;         case 7:&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;32&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;             $error = &amp;#39;服务器错误!&amp;#39;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;33&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;             return false;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;34&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     }&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;35&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     //都没有错误: 移动文件&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;36&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     $filename = getRandomName($file[&amp;#39;name&amp;#39;]);&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;37&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     if(@move_uploaded_file($file[&amp;#39;tmp_name&amp;#39;],$path . &amp;#39;/&amp;#39; . $filename))&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;38&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     {&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;39&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;         //成功&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;40&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;         return $filename;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;41&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     }else{&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;42&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;         //失败&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;43&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;         $error = &amp;#39;文件移动失败!&amp;#39;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;44&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;         return false;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;45&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     }&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;46&lt;/span&gt; &lt;span class=&quot;x&quot;&gt; }&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;47&lt;/span&gt; &lt;span class=&quot;x&quot;&gt; /*&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;48&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;  * 生成文件名: YYYYmmddHHIISS + 随机6位字符串&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;49&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;  * @param1 string $name,文件原始名字: 在浏览器所在电脑的名字&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;50&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;  * @return string 新的名字&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;51&lt;/span&gt; &lt;span class=&quot;x&quot;&gt; */&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;52&lt;/span&gt; &lt;span class=&quot;x&quot;&gt; function getRandomName($name){&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;53&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     //构造时间日期部分&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;54&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     $newname = date(&amp;#39;YmdHis&amp;#39;);&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;55&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     //获取随机部分&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;56&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     $str = &amp;#39;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890&amp;#39;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;57&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     //随机取6位&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;58&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     for($i = 0; $i &amp;lt; 6;$i++){&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;59&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;         //每次随机取一位&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;60&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;         $newname .= $str[mt_rand(0,strlen($str) - 1)];&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;61&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     }&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;62&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     //构造后缀名&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;63&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     $newname .= strrchr($name,&amp;#39;.&amp;#39;);&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;64&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     //返回&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;65&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     return $newname;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;66&lt;/span&gt; &lt;span class=&quot;x&quot;&gt; }&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
</description>
      </item>
    
      <item>
        <title>php递归遍历文件夹</title>
        <link>http://杨柳青一些事.中国/2014/04/22/Recursive-Traversal.html</link>
        <guid isPermaLink="true">http://杨柳青一些事.中国/2014/04/22/Recursive-Traversal.html</guid>
        <pubDate>Tue, 22 Apr 2014 00:00:00 +0800</pubDate>
        <description>&lt;p&gt;用递归实现遍历文件夹及其子目录&lt;/p&gt;

&lt;hr&gt;

&lt;h3&gt;什么是递归&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;递归&lt;/strong&gt;: 函数不断的调用函数,开辟内存: 是一种典型使用空间换时间的思想(突然间内存被大量占用,效率很高)。&lt;/p&gt;

&lt;p&gt;当一个函数是为了解决某一个问题的时候, 发现在解决的过程中, 出现了子问题与本身要解决的问题(父问题)一致: 子问题与父问题一致,只是规模比较小.&lt;/p&gt;

&lt;p&gt;如果碰到了相同的问题, 可以使用父问题的解决方案去解决子问题: &lt;code&gt;调用函数自己&lt;/code&gt;&lt;/p&gt;

&lt;h3&gt;递归有两个要素&lt;/h3&gt;

&lt;p&gt;1 &lt;strong&gt;递归点&lt;/strong&gt;: 解决父问题过程中,发现了子问题与父问题一致: 递归点: 递归调用函数&lt;/p&gt;

&lt;p&gt;2 &lt;strong&gt;递归出口&lt;/strong&gt;: 保证函数能够结束的地方就是递归出口&lt;/p&gt;

&lt;h3&gt;思路&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;使用函数解决当前需要解决的问题: 不考虑子问题&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;寻找递归点: 函数在解决问题的过程中,有没有碰到与父问题相似的问题: 父问题是遍历文件夹: 子问题: 遍历出来的文件刚好又是文件夹&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;消除产生死递归的要素: .和..文件夹: 一个代表当前,一个代表上级&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;递归调用函数: 解决子问题&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;寻找递归出口: 整个文件夹遍历结束也没有发现文件夹:都是文件或者.和..文件夹&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;增加子文件的缩进: 子文件夹的遍历都是由上一级发展而来: 如果能够在每一层使用scandir的地方,定义一个层级来控制: 就可以描述当前层级是属于第几级,级别代表当前所属哪层一层文件夹: 级别就代表着缩进&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3&gt;代码实现&lt;/h3&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-php&quot; data-lang=&quot;php&quot;&gt;&lt;span class=&quot;lineno&quot;&gt; 1&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;/*&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 2&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;  * 实现遍历文件夹及其子目录&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 3&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;  * @param1 string $dir,要获取文件的路径&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 4&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;  * @param1 int $level=0,缩进层级&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 5&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;  * @return 失败返回false 成功返回遍历结果&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 6&lt;/span&gt; &lt;span class=&quot;x&quot;&gt; */&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 7&lt;/span&gt; &lt;span class=&quot;x&quot;&gt; function myscandir($dir, $level = 0){&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 8&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     //判断路径是否合法&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 9&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     if(!is_dir($dir)) return false;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     //取出该路径下的所有文件名(以数组的形式)&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;11&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     $files = scandir($dir);&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;12&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     //遍历数组&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;13&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     foreach($files as $file){&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;14&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;         //剔除.与..目录&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;15&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;         if($file != &amp;#39;.&amp;#39; &amp;amp;&amp;amp; $file != &amp;#39;..&amp;#39;){      &lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;16&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;             //构造新路径&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;17&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;             $new_dir = $dir . &amp;#39;/&amp;#39; . $file;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;18&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;             //判断输出&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;19&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;             if(is_file($new_dir)){&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;20&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;                 //是文件,则以蓝色字体输出&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;21&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;                 echo str_repeat(&amp;#39;&amp;amp;nbsp;&amp;amp;nbsp&amp;#39;, $level * 2),&amp;quot;&amp;lt;font color=&amp;#39;blue&amp;#39;&amp;gt;$file&amp;lt;/font&amp;gt;&amp;lt;br/&amp;gt;&amp;quot;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;22&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;             }else{&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;23&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;                 //是路径,则以红色字体输出并继续遍历&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;24&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;                 echo str_repeat(&amp;#39;&amp;amp;nbsp;&amp;amp;nbsp&amp;#39;, $level * 2),&amp;quot;&amp;lt;font color=&amp;#39;red&amp;#39;&amp;gt;$file&amp;lt;/font&amp;gt;&amp;lt;br/&amp;gt;&amp;quot;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;25&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;                 //递归点&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;26&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;                 myscandir($new_dir, $level + 1);&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;27&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;             }&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;28&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;         }&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;29&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;     }&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;30&lt;/span&gt; &lt;span class=&quot;x&quot;&gt; }&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;打完收工:p&lt;/p&gt;
</description>
      </item>
    
      <item>
        <title>改变</title>
        <link>http://杨柳青一些事.中国/2013/12/31/Change.html</link>
        <guid isPermaLink="true">http://杨柳青一些事.中国/2013/12/31/Change.html</guid>
        <pubDate>Tue, 31 Dec 2013 00:00:00 +0800</pubDate>
        <description>&lt;blockquote&gt;
&lt;p&gt;缺乏行动的人，都会有一个坏习惯：安于现状，厌弃改变。我认为这是一种极具欺骗性和自我毁灭性的坏习惯，因为‘盖将自其变者而观之，则天地曾不能以一瞬’，正如人会生死一样，没有恒定不变的事物。但因内心的恐惧——对未知的恐惧，很多人在抗拒改变，哪怕现状多么令他不满意，他都不会也不敢向前跨出一步。看看那些本该事业有成，却一事无成的人，你就知道不同情他们是件很难的事。 &lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr&gt;

&lt;h2&gt;发生了一些事情&lt;/h2&gt;

&lt;p&gt;近段时间发生了一些始料未及的事情,说实话,事情的进展过于迅速让我未能很好的处理,虽然对于结果很遗憾,但是,我觉得这可以影响到我的人生的遭遇既然已经发生,那么痛定思痛,是时候考虑到底是哪方面出现了问题,就我自身而言,宅在宿舍玩游戏明显并不是对我从小学习成绩优异的答复,对未来的无知与畏惧也让我必须做出点改变 =.=&lt;/p&gt;

&lt;h2&gt;生活态度&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;将时间花在毕业后亟需掌握的专业知识上.&lt;/li&gt;
&lt;li&gt;运动的滋味很美妙,有时间多打打球,跑跑步.&lt;/li&gt;
&lt;li&gt;大自然自然是散心的好去处.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2&gt;宣誓?&lt;/h2&gt;

&lt;p&gt;实话说,以前我倾向于喜欢一成不变的生活,觉得未来我自己可以规划好,我喜欢这种感觉,然而当事情超出自己所能承受的变化时的那种未知的我为鱼肉人为刀殂的感觉让我心慌了,当然,对自己的自责也让我快速明白,只有不断强化自己,才能规划好未来,所以改变并不会让我感觉畏惧,反而,我期待改变,因为那意味着我又变强了.&lt;code&gt;好想说一句我还会回来的 =.=&lt;/code&gt;&lt;/p&gt;
</description>
      </item>
    
      <item>
        <title>2010年阅读书单</title>
        <link>http://杨柳青一些事.中国/2010/01/01/Book-List-2010.html</link>
        <guid isPermaLink="true">http://杨柳青一些事.中国/2010/01/01/Book-List-2010.html</guid>
        <pubDate>Fri, 01 Jan 2010 00:00:00 +0800</pubDate>
        <description></description>
      </item>
    
  </channel>
</rss>